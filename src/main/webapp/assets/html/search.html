<form class="search-filter" method="get" action="search">
    <h1>Search Pals</h1>
    <div class="col s6">
    <label for="game">
        Game
    </label>
    <select class="s8" id="game" name="game" ng-model="search.game" ng-change="search.tier=null">
        <option value="">Select a Game</option>
        <option value="lol">League of Legends</option>
    </select>
    </div>
    <div class="col s6">
        <span ng-show="search.game=='lol'">
             <label for="tier">
            Tier
        </label>
        <select id="tier" name="tier" ng-model="search.tier">
            <option value="">Select Tier</option>
            <option value="BRONZE">Bronze</option>
            <option value="SILVER">Silver</option>
            <option value="GOLD">Gold</option>
            <option value="PLATINUM">Platinum</option>
            <option value="DIAMOND">Diamond</option>
            <option value="MASTER">Master</option>
            <option value="CHALLENGER">Challenger</option>
        </select>
        </span>
    </div>
    <input type="submit"  value="Filter" /> <a href="search" class="small">Reset Filter</a>

</form>
<table class="data-table" >
    <thead>
    <tr>
        <td>#</td>
        <td>Username</td>
        <td>Games</td>
        <td>Languages</td>
        <td>Rating Avg.</td>
        <td>Tier</td>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="item in As.search">
        <td><img width="60" ng-src="{{item.picture}}"/></td>
        <td>{{item.userAccount.username}}</td>
        <td>
            <span ng-repeat="g in item.gameInfo">
                <img
                      ng-src="assets/images/games/icons/{{g.game.tag}}icon.png" width="60"/>
            <span class="hide">{{g.game.tag}}</span>
                </span>
        </td>
        <td>
            <div class="flags">
                <img  ng-repeat="lan in item.languages"
                      ng-src="assets/images/flags/{{lan.language}}.png" />
            </div>
        </td>
        <td>
            {{item.ratingAvg}}
        </td>
        <td>
            <span ng-init="tier = (item.gameInfo[0].leagues.length>0) ? item.gameInfo[0].leagues[0].tier : 'unranked'">
                    <span loltier="{{tier}}"></span>
                   <span class="hide">{{tier}}</span>
                </span>
        </td>
    </tr>
    </tbody>
</table>

<script>


    $.fn.dataTable.enum( [ 'BRONZE','SILVER','GOLD','PLATINUM','DIAMOND','MASTER','CHALLENGER' ] );

    $(document).ready( function () {

        loadTable();
    } );

    function loadTable(){
        setTimeout(function() {  $('.data-table').DataTable();
        }, 500);
        setTimeout(function() {
            $("select[name='DataTables_Table_0_length']").selectric(
                {
                    disableOnMobile: true
                }
            );
        }, 700);
    }



</script>